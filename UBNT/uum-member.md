# UUM-Cloud 有关成员管理的流程及代码

## 一、实体与动作的关系   

### 实体
- 部门： 一个部门中有多个子部门、多个成员   
- 角色： 一个角色被创建在角色群里，一个角色有多个成员  
- 成员： 一个成员有多个角色，一个成员可以在多个部门  

### 功能
- 创建组织  
- 创建部门
- 编辑组织  
- 删除组织  
- 创建角色群  
- 创建角色  
- 添加成员（添加新成员、在已有的成员中添加）
- 删除成员（从该角色中删除、从该组织中删除）
- 搜索功能 

### 问题：
- 成员只能在子部门中添加？  

### 待优化：
<!-- - 清空搜索选项后应该加载全部 -->


## 二、项目代码流程  
1、对于成员管理主要在member文件夹中组件的划分：  
`Member`中有三个子组件：  
`DepartmentList` —— 部门和角色的左侧面板，主要是接收和传递切换的状态  
`MemberHeader` ——  添加、删除、搜索部门与角色中的人员    
`MemberList` —— 显示相关部门或角色中的成员    

2、功能的流程理解：  
`搜索功能`：     
父组件向`MemberHeader`组件传递当前的管理状态（organization or role），子组件获取到搜索框中的值后传递给父组件，当子组件被触发关闭搜索后的标签或清空所搜框中的值后也会传递给父组件    

`添加功能`：  
在添加功能中首先得先区分是在organization中还是在role中添加成员，  
如何区分：使用全局的currentManageType && 相对于类型状态中的当前选中的organization或role的id  
添加新成员的功能是一样的，只有从已存在的成员中选择是不一样的。  
当一开始进入页面中，是未选中organization或role中任何元素的，所以此时添加成员只能是添加新成员  
添加分为三种：在成员信息中向该成员添加部门和角色。 在部门或角色中添加新成员或已有成员    

`删除功能`：  
删除功能和添加功能类似，也是需要根据管理状态来删除成员，将成员从公司或部门或角色中删除